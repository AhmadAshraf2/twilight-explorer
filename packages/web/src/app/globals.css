@tailwind base;
@tailwind components;
@tailwind utilities;

/*
  Theme Bridge
  ============
  Tailwind colors resolve via CSS variables (see tailwind.config.js).
  This enables runtime theme switching using `data-theme` on <html> or <body>.
*/

:root {
  /*
    Font variables are populated via next/font in `app/layout.tsx`.
    Provide fallbacks so SSR still has sensible defaults.
  */
  --font-serif: ui-serif, Georgia, serif;
  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Roboto Mono", monospace;
}

/* Legacy theme (mempool-inspired) â€” RGB triplets so Tailwind alpha utilities work */
[data-theme='legacy'] {
  --page: 17 19 31;
  --background: 17 19 31;
  --background-secondary: 26 29 46;
  --background-tertiary: 36 40 59;
  --background-primary: 17 19 31;

  --card: 26 29 46;
  --card-hover: 36 40 59;
  --card-border: 51 65 85;

  --primary: 124 58 237;
  --primary-light: 167 139 250;
  --primary-dark: 91 33 182;

  --accent-blue: 59 130 246;
  --accent-green: 34 197 94;
  --accent-yellow: 234 179 8;
  --accent-red: 239 68 68;
  --accent-orange: 249 115 22;

  --accent-gold: 124 58 237;
  --accent-gold-light: 167 139 250;
  --accent-gold-dark: 91 33 182;
  --accent-amber: 234 179 8;
  --accent-burgundy: 249 115 22;

  --text: 255 255 255;
  --text-secondary: 148 163 184;
  --text-muted: 100 116 139;

  --border: 51 65 85;
  --border-light: 71 85 105;
}

/* Auction theme (strict palette) */
[data-theme='auction'] {
  --page: 5 5 5;
  --background: 5 5 5;
  --background-secondary: 10 10 12;
  --background-tertiary: 14 14 16;
  --background-primary: 0 0 0;

  --card: 10 10 12;
  --card-hover: 14 14 16;
  /* Reference border tone (#1F1F23) */
  --card-border: 31 31 35;

  /* Primary = Auction gold */
  --primary: 232 158 40;
  --primary-light: 246 180 108;
  --primary-dark: 198 127 26;

  /*
    Strict-auction remap of legacy accent keys:
    - accent.green/red remain semantic success/error
    - accent.blue/orange/yellow are mapped into auction-friendly highlights
  */
  --accent-blue: 217 126 72;      /* amber */
  --accent-orange: 198 127 26;    /* gold-dark */
  --accent-yellow: 246 180 108;   /* gold-light */
  --accent-green: 24 195 125;     /* green */
  --accent-red: 255 74 74;        /* red */

  /* Explicit auction tokens */
  --accent-gold: 232 158 40;
  --accent-gold-light: 246 180 108;
  --accent-gold-dark: 198 127 26;
  --accent-amber: 217 126 72;
  --accent-burgundy: 63 29 29;

  --text: 249 250 251;
  --text-secondary: 163 163 179;
  --text-muted: 107 107 122;

  /* subtle border on dark cards (solid approximation) */
  --border: 31 31 35;
  --border-light: 42 42 46;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html,
body {
  min-height: 100vh;
  background-color: rgb(var(--background));
  color: rgb(var(--text));
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgb(var(--background-secondary));
}

::-webkit-scrollbar-thumb {
  background: rgb(var(--border) / 0.6);
  border-radius: 999px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--text-secondary) / 0.8);
}

@layer base {
  html {
    @apply antialiased;
  }
  body {
    @apply font-sans text-sm leading-relaxed;
  }
  .font-display {
    @apply font-serif font-normal tracking-tighter-2;
  }
  .font-body {
    @apply font-sans font-normal tracking-normal;
  }
  .font-data {
    @apply font-mono font-medium tracking-tight;
  }
}

@layer components {
  .card-hover {
    @apply hover:bg-card-hover hover:shadow-card-hover transition-all duration-200;
  }

  /* Subtle grain texture overlay (matches auction vibe) */
  .grain-overlay {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    @apply opacity-[0.03] pointer-events-none fixed inset-0 z-50;
  }

  /* Local noise layer for hero cards */
  .bg-noise {
    position: absolute;
    inset: 0;
    z-index: 0;
    opacity: 0.04;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }
}

/* Table styles */
.table-container {
  /* Reference-like table box: inner surface + border + shadow */
  @apply overflow-x-auto rounded-[10.5px] border border-card-border shadow-card bg-black/30;
}

table {
  @apply w-full text-[13.5px] leading-[20px];
}

th {
  @apply bg-background-tertiary/40 px-4 py-3 text-left font-medium text-text-secondary;
  @apply text-[10.5px] leading-[14px] uppercase tracking-wider;
}

td {
  @apply px-4 py-3 border-t border-card-border/50;
}

tr:hover td {
  @apply bg-background-tertiary/30;
}

/* Card styles */
.card {
  /* Keep padding for now to avoid layout shifts; update surface/radius/shadow to Auction */
  @apply bg-card rounded-[10.5px] border border-card-border shadow-card p-4;
}

.card-header {
  @apply text-[15.8px] leading-[24px] font-medium mb-4 text-text;
}

/* Badge styles */
.badge {
  @apply inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium;
}

.badge-success {
  @apply bg-accent-green/20 text-accent-green;
}

.badge-error {
  @apply bg-accent-red/20 text-accent-red;
}

.badge-warning {
  @apply bg-accent-yellow/20 text-accent-yellow;
}

.badge-info {
  @apply bg-accent-blue/20 text-accent-blue;
}

.badge-primary {
  @apply bg-primary/20 text-primary-light;
}

/* Link styles */
a {
  @apply text-primary-light hover:text-primary transition-colors;
}

/* Code/hash styles */
.hash {
  @apply font-mono text-sm text-text-secondary hover:text-primary-light transition-colors cursor-pointer;
}

.hash-truncate {
  @apply max-w-[200px] truncate;
}

/* Pulse animation for live indicator */
@keyframes pulse-dot {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.pulse-dot {
  animation: pulse-dot 2s ease-in-out infinite;
}

/* Message type colors */
.msg-bridge {
  @apply text-accent-blue;
}

.msg-forks {
  @apply text-accent-orange;
}

.msg-volt {
  @apply text-accent-yellow;
}

.msg-zkos {
  @apply text-primary-light;
}
